<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <link href="../css/style.css" rel="stylesheet" type="text/css" />
</head>
<body>


  <h1>struct OpenSSL::BIO</h1>







  <h2>Superclass hierarchy</h2>
  <div style="padding-left: 0px"><a href="../Object.html">Object</a></div><div style="padding-left: 20px"><a href="../Value.html">Value</a></div><div style="padding-left: 40px"><a href="../Struct.html">Struct</a></div><div style="padding-left: 60px"><a href="../OpenSSL/BIO.html">OpenSSL::BIO</a></div>










  
    <h2>Constant Summary</h2>
  
  <ul>
    
      <li class="entry-const">
        <strong>CRYSTAL_BIO</strong> = <code>crystal_bio <span class="o">=</span> <span class="t">LibCrypto</span><span class="t">::</span><span class="t">BioMethod</span>.<span class="k">new</span>
crystal_bio.name <span class="o">=</span> <span class="s">"Crystal BIO"</span>.cstr
crystal_bio.bwrite <span class="o">=</span> ->(bio : <span class="t">::</span><span class="t">Pointer</span>(<span class="t">LibCrypto</span><span class="t">::</span><span class="t">Bio</span>), data : <span class="t">::</span><span class="t">Pointer</span>(<span class="t">UInt8</span>), len : <span class="t">Int32</span>) <span class="k">do</span>
  io <span class="o">=</span> <span class="t">Box</span>(<span class="t">IO</span>).unbox(bio.value.ptr)
  io.write(<span class="t">Slice</span>.<span class="k">new</span>(data, len))
  len
<span class="k">end</span>
crystal_bio.bread <span class="o">=</span> ->(bio : <span class="t">::</span><span class="t">Pointer</span>(<span class="t">LibCrypto</span><span class="t">::</span><span class="t">Bio</span>), buffer : <span class="t">::</span><span class="t">Pointer</span>(<span class="t">UInt8</span>), len : <span class="t">Int32</span>) <span class="k">do</span>
  io <span class="o">=</span> <span class="t">Box</span>(<span class="t">IO</span>).unbox(bio.value.ptr)
  (io.read(<span class="t">Slice</span>.<span class="k">new</span>(buffer, len))).to_i
<span class="k">end</span>
crystal_bio.ctrl <span class="o">=</span> ->(bio : <span class="t">::</span><span class="t">Pointer</span>(<span class="t">LibCrypto</span><span class="t">::</span><span class="t">Bio</span>), cmd : <span class="t">Int32</span>, num : <span class="t">Int64</span>, ptr : <span class="t">::</span><span class="t">Pointer</span>(<span class="t">Void</span>)) <span class="k">do</span>
  io <span class="o">=</span> <span class="t">Box</span>(<span class="t">IO</span>).unbox(bio.value.ptr)
  <span class="k">if</span> cmd.<span class="k">is_a?</span>(<span class="t">LibCrypto</span><span class="t">::</span><span class="t">CTRL_FLUSH</span>)
    <span class="k">if</span> io.responds_to?(<span class="n">:flush</span>)
      io.flush
    <span class="k">end</span>
    <span class="n">1</span>
  <span class="k">else</span>
    <span class="k">if</span> <span class="k">if</span> __temp_229 <span class="o">=</span> cmd.<span class="k">is_a?</span>(<span class="t">LibCrypto</span><span class="t">::</span><span class="t">CTRL_PUSH</span>)
      __temp_229
    <span class="k">else</span>
      cmd.<span class="k">is_a?</span>(<span class="t">LibCrypto</span><span class="t">::</span><span class="t">CTRL_POP</span>)
    <span class="k">end</span>
      <span class="n">0</span>
    <span class="k">else</span>
      <span class="t">STDERR</span>.puts((((<span class="t">::</span><span class="t">StringIO</span>.<span class="k">new</span> <span class="o"><<</span> <span class="s">"WARNING: Unsupported BIO ctrl call ("</span>) <span class="o"><<</span> cmd) <span class="o"><<</span> <span class="s">")"</span>).to_s)
      <span class="n">0</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
crystal_bio.create <span class="o">=</span> ->(bio : <span class="t">::</span><span class="t">Pointer</span>(<span class="t">LibCrypto</span><span class="t">::</span><span class="t">Bio</span>)) <span class="k">do</span>
  bio.value.shutdown <span class="o">=</span> <span class="n">1</span>
  bio.value.init <span class="o">=</span> <span class="n">1</span>
  bio.value.num <span class="o">=</span> <span class="n">-1</span>
<span class="k">end</span>
crystal_bio.destroy <span class="o">=</span> ->(bio : <span class="t">::</span><span class="t">Pointer</span>(<span class="t">LibCrypto</span><span class="t">::</span><span class="t">Bio</span>)) <span class="k">do</span>
  bio.value.ptr <span class="o">=</span> <span class="t">Pointer</span>(<span class="t">Void</span>).null
  <span class="n">1</span>
<span class="k">end</span>
crystal_bio
</code>
        
      </li>
    
  </ul>



  <h2>Class Method Summary</h2>
  <ul>
    
      <li class="entry-summary">
        <a href="#new%28io%29-class-method" class="signature"><strong>.new</strong>(io)</a>
        
      </li>
    
  </ul>



  <h2>Instance Method Summary</h2>
  <ul>
    
      <li class="entry-summary">
        <a href="#to_unsafe-instance-method" class="signature"><strong>#to_unsafe</strong></a>
        
      </li>
    
  </ul>






  <h2>Class Method Detail</h2>
  
    <div class="entry-detail">
      <div class="signature" id="new%28io%29-class-method">
        
        def self.<strong>new</strong>(io)
      </div>
      
      
        <br/>
        <div>[<a href="https://github.com/manastech/crystal/blob/48461ba58d207bb5de04c9f2270eff03930beeb1/src/openssl/bio.cr#L45" target="_blank">View source</a>]</div>
      
    </div>
    <hr/>
  



  <h2>Instance Method Detail</h2>
  
    <div class="entry-detail">
      <div class="signature" id="to_unsafe-instance-method">
        
        def <strong>to_unsafe</strong>
      </div>
      
      
        <br/>
        <div>[<a href="https://github.com/manastech/crystal/blob/48461ba58d207bb5de04c9f2270eff03930beeb1/src/openssl/bio.cr#L50" target="_blank">View source</a>]</div>
      
    </div>
    <hr/>
  





</body>
</html>
